{"version":3,"sources":["../src/edit_form_helper.js"],"names":["define","$","Notification","str","Templates","init","pageType","courseDefaultIcon","courseId","sectionId","section","userId","allowphototiles","documentationUrl","document","ready","selectedIconName","selectBox","endsWith","text","currentIcon","val","render","initialicon","initialname","done","html","insertAfter","hide","require","iconPicker"],"mappings":"AAgCAA,OAAM,sCAAC,CAAC,QAAD,CAAW,mBAAX,CAAgC,UAAhC,CAA4C,gBAA5C,CAAD,CACF,SAAUC,CAAV,CAAaC,CAAb,CAA2BC,CAA3B,CAAgCC,CAAhC,CAA2C,CACvC,aACA,MAAO,CACHC,IAAI,CAAE,cAAUC,CAAV,CAAoBC,CAApB,CAAuCC,CAAvC,CAAiDC,CAAjD,CAA4DC,CAA5D,CAAqEC,CAArE,CAA6EC,CAA7E,CAA8FC,CAA9F,CAAgH,CAClHZ,CAAC,CAACa,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAY,IAMtBC,CAAAA,CANsB,CAOtBC,CAPsB,CAS1B,GAAIX,CAAQ,CAACY,QAAT,CAAkB,oBAAlB,CAAJ,CAA6C,CACzCD,CAAS,CAAGhB,CAAC,CAAC,cAAD,CAAb,CACAe,CAAgB,CAAGf,CAAC,CAAC,8BAAD,CAAD,CAAkCkB,IAAlC,EAAnB,CAEA,GAAIC,CAAAA,CAAJ,CACA,GAAwB,EAApB,GAAAH,CAAS,CAACI,GAAV,EAAJ,CAA4B,CACxBD,CAAW,CAAGb,CACjB,CAFD,IAEO,CACHa,CAAW,CAAGH,CAAS,CAACI,GAAV,EACjB,CACDjB,CAAS,CAACkB,MAAV,CAAiB,0CAAjB,CAA6D,CACzDC,WAAW,CAAEH,CAD4C,CAEzDI,WAAW,CAAER,CAF4C,CAGzDP,SAAS,CAAEA,CAH8C,CAIzDG,eAAe,CAAEA,CAJwC,CAA7D,EAKGa,IALH,CAKQ,SAAUC,CAAV,CAAgB,CACpBzB,CAAC,CAACyB,CAAD,CAAD,CAAQC,WAAR,CAAoBV,CAApB,EAGAA,CAAS,CAACW,IAAV,GACAC,OAAO,CAAC,CAAC,oCAAD,CAAD,CAAyC,SAASC,CAAT,CAAqB,CACjEA,CAAU,CAACzB,IAAX,CAAgBG,CAAhB,CAA0BF,CAA1B,CAAoCM,CAApC,CAAqDC,CAArD,CACH,CAFM,CAGV,CAbD,CAcH,CAEJ,CAnCD,CAoCH,CAtCE,CAwCV,CA3CC,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/* eslint space-before-function-paren: 0 */\n\n/**\n * Javascript Module to handle changes which are made to the course > edit settings\n * form as the user changes various options\n * e.g. if user deselects one item, this deselects another linked one for them\n * if the user picks an invalid option it will be detected by format_tiles::edit_form_validation (lib.php)\n * but this is to help them avoid triggering that if they have JS enabled\n *\n * @module      edit_form_helper\n * @package     course/format\n * @subpackage  multitopic\n * @copyright   2018 David Watson {@link http://evolutioncode.uk}\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since       Moodle 3.3\n */\n\ndefine([\"jquery\", \"core/notification\", \"core/str\", \"core/templates\"],\n    function ($, Notification, str, Templates) {\n        \"use strict\";\n        return {\n            init: function (pageType, courseDefaultIcon, courseId, sectionId, section, userId, allowphototiles, documentationUrl) {\n                $(document).ready(function () {\n\n                    // If we are on the course edit settings form, render a button to be added to it.\n                    // Put it next to the existing drop down select box for course default tile icon.\n                    // Add it to the page.\n\n                    var selectedIconName;\n                    var selectBox;\n                    // alert(\"page type: \" + pageType + \"\\ntest: \" + pageType.endsWith(\"course_editsection\"));\n                    if (pageType.endsWith(\"course_editsection\")) {\n                        selectBox = $(\"#id_tileicon\");\n                        selectedIconName = $(\"#id_tileicon option:selected\").text();\n\n                        var currentIcon;\n                        if (selectBox.val() === \"\") {\n                            currentIcon = courseDefaultIcon;\n                        } else {\n                            currentIcon = selectBox.val();\n                        }\n                        Templates.render(\"format_multitopic/icon_picker_launch_btn\", {\n                            initialicon: currentIcon,\n                            initialname: selectedIconName,\n                            sectionId: sectionId,\n                            allowphototiles: allowphototiles\n                        }).done(function (html) {\n                            $(html).insertAfter(selectBox);\n\n                            // We can hide the original select box now as users will use the button instead.\n                            selectBox.hide();\n                            require([\"format_multitopic/edit_icon_picker\"], function(iconPicker) {\n                                iconPicker.init(courseId, pageType, allowphototiles, documentationUrl);\n                            });\n                        });\n                    }\n\n                });\n            }\n        };\n    }\n);"],"file":"edit_form_helper.min.js"}