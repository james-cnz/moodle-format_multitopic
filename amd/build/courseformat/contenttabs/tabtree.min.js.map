{"version":3,"file":"tabtree.min.js","sources":["../../../src/courseformat/contenttabs/tabtree.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nimport {BaseComponent} from 'core/reactive';\nimport {getCurrentCourseEditor} from 'core_courseformat/courseeditor';\nimport Tab from 'format_multitopic/courseformat/contenttabs/tab';\nimport Templates from 'core/templates';\n\n\n/**\n * Course section tabs updater.\n *\n * @module     format_multitopic/courseformat/contenttabs/tabtree\n * @class      format_multitopic/courseformat/contenttabs/tabtree\n * @copyright  2022 Jeremy FitzPatrick and Te WƒÅnanga o Aotearoa\n * @copyright  2023 James Calder and Otago Polytechnic\n * @copyright  based on work by 2021 Ferran Recio <ferran@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport default class Component extends BaseComponent {\n\n    /**\n     * Constructor hook.\n     */\n    create() {\n        // Optional component name for debugging.\n        this.name = 'contenttabs';\n        // Default query selectors.\n        this.selectors = {\n            TAB: `ul:first-of-type li`,\n            CHILDTAB: `ul:nth-child(2) li`,\n            SECTION_ITEM: `a.nav-link`,\n        };\n        // Default classes\n        this.classes = {\n            ACTIVETAB: 'active'\n        };\n        // Objects to keep tabs on the tabs\n        this.tabs = {};\n        this.childtabs = {};\n        this.activetab = [null, null];\n\n        this.originalsinglesectionid = document.querySelector(\"ul.sections\").dataset.originalsinglesectionid;\n    }\n\n    static init(target) {\n        return new this({\n            element: document.getElementById(target),\n            reactive: getCurrentCourseEditor(),\n        });\n    }\n\n    /**\n     * Initial state ready method.\n     *\n     */\n    stateReady() {\n        this._indexContents();\n    }\n\n    getWatchers() {\n        return [\n            // Sections sorting.\n            {watch: `course.sectionlist:updated`, handler: this._refreshCourseSectionTabs},\n        ];\n    }\n\n    /**\n     * Refresh the section tabs.\n     *\n     * @param {object} param\n     * @param {Object} param.element\n     */\n    async _refreshCourseSectionTabs({element}) {\n\n        const originalSingleSection = this.reactive.get(\"section\", this.originalsinglesectionid);\n        let singleSectionId;\n        let singleSection;\n        if (originalSingleSection) {\n            singleSectionId = (originalSingleSection.levelsan < 2 ? originalSingleSection.id : originalSingleSection.pageid);\n            singleSection = (singleSectionId == originalSingleSection.id) ?\n                            originalSingleSection : this.reactive.get(\"section\", singleSectionId);\n        } else {\n            singleSectionId = null;\n            singleSection = null;\n        }\n\n        let newActiveTab0id;\n        if (singleSection) {\n            newActiveTab0id = (singleSection.levelsan >= 1) ? singleSection.parentid : singleSection.id;\n        } else {\n            newActiveTab0id = null;\n        }\n\n        // Add/remove the second-level tabs, if necessary.\n        let tabsSecondRowDom = this.element.querySelector('ul:nth-of-type(2)');\n        const tabsSecondRowShow = singleSection\n                            && ((element.firstsectionlist.length > 1)\n                                || (element.secondsectionlist[element.firstsectionlist[0]].length > 1));\n        if (tabsSecondRowShow && !tabsSecondRowDom) {\n            // Create tab row.\n            this.element.querySelector('ul:first-of-type').insertAdjacentElement(\n                'afterend', tabsSecondRowDom = document.createElement('ul')\n            );\n            tabsSecondRowDom.className = 'nav nav-tabs mb-3';\n            // Create index tab.\n            const activeTab0Dom = this.element.querySelector('ul:first-of-type li:first-of-type');\n            let data = {\n                \"sectionid\": activeTab0Dom.dataset.id,\n                \"level\": 1,\n                \"active\": true,\n                \"inactive\": false,\n                \"title\": activeTab0Dom.querySelector('a').getAttribute('title'),\n                \"text\": '<div class=\"tab_content dimmed\" data-itemid=\"' + activeTab0Dom.dataset.id + '\">'\n                        + activeTab0Dom.querySelector('a').getAttribute('title') + '</div>',\n            };\n            let item = document.createElement(\"li\");\n            tabsSecondRowDom.insertAdjacentElement('afterbegin', item);\n            let html = await Templates.render(\"format_multitopic/courseformat/contenttabs/tab\", data);\n            item = Templates.replaceNode(item, html, \"\")[0];\n            // Create add tab.\n            const addTab0Dom = this.element.querySelector('ul:first-of-type li:last-of-type');\n            data = {\n                \"level\": 1,\n                \"active\": false,\n                \"inactive\": false,\n                \"link\": [{\n                    \"link\": addTab0Dom.querySelector('a').getAttribute('href').replace(/\\binsertlevel=0\\b/, 'insertlevel=1'),\n                }],\n                \"title\": addTab0Dom.getAttribute('title'),\n                \"text\": '<i class=\"icon fa fa-plus fa-fw\" title=\"' + activeTab0Dom.getAttribute('title') + '\"></i>',\n            };\n            item = document.createElement(\"li\");\n            tabsSecondRowDom.insertAdjacentElement('beforeend', item);\n            html = await Templates.render(\"format_multitopic/courseformat/contenttabs/tab\", data);\n            item = Templates.replaceNode(item, html, \"\")[0];\n        } else if (tabsSecondRowDom && !tabsSecondRowShow) {\n            tabsSecondRowDom.remove();\n        }\n\n        // Do things that make the first row tabs match firstsectionlist.\n        const toptabslist = element.firstsectionlist ?? [];\n        const childtabslist = element.secondsectionlist ?? [];\n        let toptabs = this.element.querySelector('ul:first-of-type');\n        await this._fixOrder(toptabs, toptabslist, this.selectors.TAB, 0, childtabslist[toptabslist[0]].length > 1);\n\n        // And the second row tabs match secondsectionlist.\n        if (tabsSecondRowShow) {\n            let childtabs = this.element.querySelector('ul:nth-of-type(2)');\n            if (childtabs) {\n                await this._fixOrder(childtabs, childtabslist[newActiveTab0id], this.selectors.CHILDTAB, 1, false);\n            }\n        }\n\n        this._changeActiveTabs(newActiveTab0id, tabsSecondRowShow ? singleSection.id : null);\n\n        this._indexContents();\n    }\n\n    /**\n     * Change active tabs, if necessary.\n     *\n     * @param {int|null} newActiveTab0id\n     * @param {int|null} newActiveTab1id\n     */\n    _changeActiveTabs(newActiveTab0id, newActiveTab1id) {\n\n        // Change the active top-level tab, if necessary.\n        if (newActiveTab0id != this.activetab[0]) {\n            let anchor = this.element.querySelector('ul:first-of-type div[data-itemid=\"' + this.activetab[0] + '\"]')?.parentElement;\n            if (anchor) {\n                let section = this.reactive.get(\"section\", this.activetab[0]);\n                anchor.classList.remove(\"active\");\n                anchor.href = section.sectionurl.replace(\"&amp;\", \"&\");\n            }\n            this.activetab[0] = newActiveTab0id;\n            anchor = this.element.querySelector('ul:first-of-type div[data-itemid=\"' + this.activetab[0] + '\"]')?.parentElement;\n            if (anchor) {\n                anchor.classList.add(\"active\");\n                anchor.removeAttribute(\"href\");\n            }\n            if (newActiveTab1id) {\n                const addAnchor = this.element.querySelector('ul:nth-of-type(2) li:last-of-type a');\n                const addLink = addAnchor.href.replace(/\\binsertparentid=\\d+\\b/, \"insertparentid=\" + this.activetab[0]);\n                addAnchor.setAttribute(\"href\", addLink);\n            }\n        }\n\n        // Change the active second-level tab, if necessary.\n        if (newActiveTab1id && newActiveTab1id != this.activetab[1]) {\n            let anchor = this.element.querySelector('ul:nth-of-type(2) div[data-itemid=\"' + this.activetab[1] + '\"]')\n                            ?.parentElement;\n            if (anchor) {\n                let section = this.reactive.get(\"section\", this.activetab[1]);\n                anchor.classList.remove(\"active\");\n                anchor.href = section.sectionurl.replace(\"&amp;\", \"&\");\n            }\n            this.activetab[1] = newActiveTab1id;\n            anchor = this.element.querySelector('ul:nth-of-type(2) div[data-itemid=\"' + this.activetab[1] + '\"]')?.parentElement;\n            if (anchor) {\n                anchor.classList.add(\"active\");\n                anchor.removeAttribute(\"href\");\n            }\n        }\n\n    }\n\n    /**\n     * Regenerate content indexes.\n     *\n     * This method is used when a legacy action refresh some content element.\n     */\n    _indexContents() {\n        // Find unindexed tabs.\n        this._scanIndex(\n            this.selectors.TAB,\n            this.tabs,\n            (item) => {\n                return new Tab(item);\n            },\n            0\n        );\n\n        // Find unindexed child tabs.\n        this._scanIndex(\n            this.selectors.CHILDTAB,\n            this.childtabs,\n            (item) => {\n                return new Tab(item);\n            },\n            1\n        );\n    }\n\n    /**\n     * Reindex a tab.\n     *\n     * This method is used internally by _indexContents.\n     *\n     * @param {string} selector the DOM selector to scan\n     * @param {*} index the index attribute to update\n     * @param {*} creationhandler method to create a new indexed element\n     * @param {int} level tab level\n     */\n    _scanIndex(selector, index, creationhandler, level) {\n        const items = this.getElements(`${selector}:not([data-indexed])`);\n        items.forEach((item) => {\n            if (!item?.dataset?.id) {\n                return;\n            }\n            // Delete previous item component.\n            if (index[item.dataset.id] !== undefined) {\n                index[item.dataset.id].unregister();\n            }\n            // Create the new component.\n            index[item.dataset.id] = creationhandler({\n                ...this,\n                element: item,\n            });\n            // Update selected tab\n            let classes = item.querySelector(\"a\").classList.value;\n            if (classes.indexOf(this.classes.ACTIVETAB) !== -1) {\n                if (level <= 0) {\n                    this.activetab[0] = item.dataset.id;\n                }\n                this.activetab[1] = item.dataset.id;\n            }\n            // Mark as indexed.\n            item.dataset.indexed = true;\n        });\n    }\n\n    /**\n     * Fix/reorder the section or cms order.\n     *\n     * @param {Element} container the HTML element to reorder.\n     * @param {Array} neworder an array with the ids order\n     * @param {string} selector the element selector\n     * @param {int} level the tab level\n     * @param {boolean} hassubtree\n     */\n    async _fixOrder(container, neworder, selector, level, hassubtree) {\n\n        // Empty lists should not be visible.\n        if (!neworder.length) {\n            container.classList.add('hidden');\n            container.innerHTML = '';\n            return;\n        }\n\n        // Grant the list is visible (in case it was empty).\n        container.classList.remove('hidden');\n\n        // Move the elements in order at the beginning of the list.\n        for (const [index, itemid] of Object.entries(neworder)) {\n            const section = this.reactive.get(\"section\", itemid);\n            const visible = (section.visible && section.available || section.section == 0)\n                && (neworder.length > 1 || hassubtree);\n            const current = (section.currentnestedlevel != undefined && section.currentnestedlevel >= level);\n            let item = this.getElement(selector, itemid);\n            if (item === null) {\n                // If we don't have an item, create it.\n                let data = {\n                    \"sectionid\": itemid,\n                    \"level\": level,\n                    \"active\": 0,\n                    \"inactive\": 0,\n                    \"link\": [{\n                        \"link\": section.sectionurl\n                    }],\n                    \"title\": section.name,\n                    \"text\": '<div class=\"tab_content' + (visible ? '' : ' dimmed') + (current ? ' marker' : '')\n                        + '\" data-itemid=\"' + section.id + '\">' + section.title + '</div>'\n                };\n                item = document.createElement(\"li\");\n                container.insertBefore(item, container.lastElementChild);\n                let html = await Templates.render(\"format_multitopic/courseformat/contenttabs/tab\", data);\n                item = Templates.replaceNode(item, html, \"\")[0];\n            }\n\n            // Update visibility & current marker\n            const content = item.querySelector(\"div.tab_content\");\n            if (content && content.classList.contains(\"dimmed\") == visible) {\n                if (visible) {\n                    content.classList.remove(\"dimmed\");\n                } else {\n                    content.classList.add(\"dimmed\");\n                }\n            }\n            if (content && content.classList.contains(\"marker\") != current) {\n                if (current) {\n                    content.classList.add(\"marker\");\n                } else {\n                    content.classList.remove(\"marker\");\n                }\n            }\n\n            // Get the current element at that position.\n            const currentitem = container.children[index];\n            if (currentitem === undefined) {\n                container.append(item);\n                return;\n            }\n            if (currentitem !== item) {\n                container.insertBefore(item, currentitem);\n            }\n        }\n        // Remove the remaining elements.\n        // But we don't want the \"Add\" blown away.\n        while (container.children.length > neworder.length + 1) {\n                container.removeChild(container.lastElementChild.previousSibling);\n        }\n\n    }\n\n}"],"names":["Component","BaseComponent","create","name","selectors","TAB","CHILDTAB","SECTION_ITEM","classes","ACTIVETAB","tabs","childtabs","activetab","originalsinglesectionid","document","querySelector","dataset","target","this","element","getElementById","reactive","stateReady","_indexContents","getWatchers","watch","handler","_refreshCourseSectionTabs","originalSingleSection","get","singleSectionId","singleSection","newActiveTab0id","levelsan","id","pageid","parentid","tabsSecondRowDom","tabsSecondRowShow","firstsectionlist","length","secondsectionlist","insertAdjacentElement","createElement","className","activeTab0Dom","data","getAttribute","item","html","Templates","render","replaceNode","addTab0Dom","replace","remove","toptabslist","childtabslist","toptabs","_fixOrder","_changeActiveTabs","newActiveTab1id","anchor","_this$element$querySe","parentElement","section","classList","href","sectionurl","_this$element$querySe2","add","removeAttribute","addAnchor","addLink","setAttribute","_this$element$querySe3","_this$element$querySe4","_scanIndex","Tab","selector","index","creationhandler","level","getElements","forEach","_item$dataset","undefined","unregister","value","indexOf","indexed","container","neworder","hassubtree","innerHTML","itemid","Object","entries","visible","available","current","currentnestedlevel","getElement","title","insertBefore","lastElementChild","content","contains","currentitem","children","append","removeChild","previousSibling"],"mappings":"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"}